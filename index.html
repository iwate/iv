<!DOCTYPE html>
<html>
<head>
  <title>Image Viewer</title>
  <style>
    html,body {
      width: 100%;
      height: 100%;
      offset: 0;
      margin: 0;
    }
  </style>
</head>
<body>
  <canvas id="canvas" ></canvas>
  
  <script>
    const params = location.search.startsWith('?') ? Object.fromEntries(location.search.slice(1).split('&').map(str => str.split('='))) : {};
    
    const canvas = document.getElementById('canvas');
    
    canvas.width = document.body.offsetWidth;
    canvas.height = document.body.offsetHeight;
    
    const ctx = canvas.getContext('2d');

    const image = new Image();

    image.src = decodeURIComponent(params.src);

    const x = 0, y = 0, width = 640, height = 480;
    
    image.onload = () => {
        ctx.drawImage(image, x, y, width, height);
    }

    let scale = 1;

    canvas.addEventListener('wheel', ()=>{
        
      event.preventDefault();

      ctx.clearRect(0, 0, event.target.width, event.target.height);

      scale += event.deltaY * -0.001;

      scale = Math.min(Math.max(0.5, scale), 2);

      ctx.save();

      ctx.scale(scale, scale);
        
      ctx.drawImage(image, x, y, width, height);
      
      ctx.restore();

    }, false);
  </script>
</body>
</html>
